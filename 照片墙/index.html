<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>简单照片墙</title>
  <style>
    * {
      padding: 0;
      margin: 0;
    }

    body {
      background: url('https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1528459449041&di=52a8143168f07f97aaf5f0ad9a975239&imgtype=0&src=http%3A%2F%2Ffile03.16sucai.com%2F2016%2F10%2F1100%2F16sucai_p20161007004_014.JPG') no-repeat;
      background-size: cover;
      overflow: hidden;
    }

    .polaroid {
      padding: 10px;
      background: #dfe6e9;
      text-align: center;
      width: auto;
      position: absolute;
      filter: drop-shadow(0 0 0.25rem #74b9ff);
      transition: transform .3s linear;
    }

    .cover {
      position: absolute;
      width: 100%;
      height: 100%;
      z-index: 10;
    }

    img {
      width: 300px;
      height: 200px;
      object-fit: cover;
    }

    .wrap {
      width: 1100px;
      height: 700px;
      position: relative;
      margin: 20px auto;
      border: 1px solid #0984e3;
      box-shadow: 0 0 8px #81ecec;
    }
  </style>
</head>

<body>
    <div class="polaroid">
      <div class="cover"></div>
      <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1529048352&di=5b4d09dd179fa13d3e541a5de133e00d&imgtype=jpg&er=1&src=http%3A%2F%2Fsc.jb51.net%2Fuploads%2Fallimg%2F150709%2F14-150F91120200-L.jpg"
        alt="">
      <p>可以使用左右箭头调整角度</p>
    </div>
    <div class="polaroid">
      <div class="cover"></div>
      <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1529050718&di=54632fca7342d91ea0e92d99ed0b368b&imgtype=jpg&er=1&src=http%3A%2F%2Fscimg.jb51.net%2Fallimg%2F160825%2F103-160R5131F40-L.jpg"
        alt="">
      <p>可以使用左右箭头调整角度</p>
    </div>
    <div class="polaroid">
      <div class="cover"></div>
      <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1528456012981&di=32d13a8e147ec504d3b5de04abe417b0&imgtype=0&src=http%3A%2F%2Ffile05.16sucai.com%2F2015%2F0605%2F31b6e6eff8f9e10f8be87c57e25421a3.jpg"
        alt="">
      <p>可以使用左右箭头调整角度</p>
    </div>
    <div class="polaroid">
      <div class="cover"></div>
      <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1529048352&di=5b4d09dd179fa13d3e541a5de133e00d&imgtype=jpg&er=1&src=http%3A%2F%2Fsc.jb51.net%2Fuploads%2Fallimg%2F150709%2F14-150F91120200-L.jpg"
        alt="">
      <p>可以进行拖拽</p>
    </div>
    <div class="polaroid">
      <div class="cover"></div>
      <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1528456012980&di=6e8c6343e93bdc44cd297d1c942e90e6&imgtype=0&src=http%3A%2F%2Ffile05.16sucai.com%2F2015%2F0707%2Fdb07a10ea46899b275fe7cc0b747ba41.jpg"
        alt="">
      <p>可以进行拖拽</p>
    </div>
    <div class="polaroid">
      <div class="cover"></div>
      <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1528456012980&di=7d9252d99e8f11ca0f59b428cac0f130&imgtype=0&src=http%3A%2F%2Fimg3.redocn.com%2Ftupian%2F20120821%2Fqiutianhaibiandexiaozhenfengjingyouhua_765915_small.jpg"
        alt="">
      <p>可以进行拖拽</p>
    </div>
    <div class="polaroid">
      <div class="cover"></div>
      <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1528456012980&di=1092e130b1b8ab80436864270824af14&imgtype=0&src=http%3A%2F%2Fimg.sc115.com%2Fuploads%2Fsc%2Fcjpgs%2F1508%2Fapic13917_sc115.com.jpg"
        alt="">
      <p>美好的风景图</p>
    </div>
    <div class="polaroid">
      <div class="cover"></div>
      <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1528456012980&di=a42866d001f2cbe81b0d3ac16b082604&imgtype=0&src=http%3A%2F%2Fscimg.jb51.net%2Fallimg%2F160704%2F103-160F41214250-L.jpg"
        alt="">
      <p>美好的风景图</p>
    </div>
    <div class="polaroid">
      <div class="cover"></div>
      <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1528456012978&di=f1018bdd058aaf5b2403ef3adaea8120&imgtype=0&src=http%3A%2F%2Fsc.jb51.net%2Fuploads%2Fallimg%2F150902%2F14-150Z21154080-L.jpg"
        alt="">
      <p>美好的风景图</p>
    </div>
  <script>
    window.onload = function () {
      var ocover = document.getElementsByClassName("cover")
      var pre = ocover[0].parentNode
      var body = document.getElementsByTagName('body')[0]
      resize()
      window.onresize = resize

      function resize() {
        var winw = document.body.clientWidth
        var winh = window.innerHeight
        body.style.width = winw
        body.style.height = winh
        for (let i = 0; i < ocover.length; i++) {
          // 为每张图片生成随机的定位和旋转角度
          var left = Math.random() * (winw - 1.3 * ocover[i].offsetWidth)
          var top = Math.random() * (winh - ocover[i].offsetHeight)
          var deg = Math.random() * 45
          if (i & 2 == 0) {
            deg = -deg
          }
          ocover[i].parentNode.style.left = left + 'px'
          ocover[i].parentNode.style.top = top + 'px'
          ocover[i].parentNode.style.transform = 'rotate(' + deg + 'deg)'
          ocover[i].onmousedown = function () {
            // 鼠标点击时候z-index置为最大 顶部
            pre.style.zIndex = 0;
            this.parentNode.style.zIndex = 1000;
            drag(this.parentNode)
            pre = this.parentNode
          }
        }
      }
      // 按键按下
      document.onkeydown = function(event) {
        // 获取当前这张图片的选中角度
        var deg = pre.style.transform // 通过这种方式获取的是计算前的 rotate(32.3333deg)结果  而不会是matrix矩阵
        deg = parseFloat(deg.substring(deg.indexOf('(')+1, deg.lastIndexOf('d'))) // 截取字符串的方法截取旋转的度数
        if (event.keyCode == 37){
          // 左箭头
          deg--
        } else if(event.keyCode == 39) {
          deg++
        } else{
          return false
        }
        pre.style.transform = 'rotate(' + deg + 'deg)'
      }
    }

    // 拖拽函数逻辑
    function drag(ele) {
      document.onmousedown = function (e) {
        // 先获取鼠标点击时距离被拖拽元素上方 以及 左方 的距离
        var disx = e.clientX -  ele.offsetLeft
        var disy = e.clientY - ele.offsetTop
        document.onmousemove = function (e) {
          // 移动时候实时获取鼠标位置并赋值给拖拽元素
          var left = e.clientX - disx
          var top = e.clientY - disy
          ele.style.left = left + 'px'
          ele.style.top = top + 'px'
        }
        document.onmouseup = function (e) {
          // 放开鼠标的时候取消监听事件
          document.onmousemove = null
          document.onmouseup = null
        }
      }
    }
  </script>
</body>

</html>